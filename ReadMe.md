Hierarchical optimization for quadrupedal manipulator